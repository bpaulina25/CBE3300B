<div class="tab-pane fade show active" id="milestone3" role="tabpanel">
  <h3>ğŸ“¡ Milestone 4: MVP + Arduino + Python CSV Integration</h3>
  <p>Test setup for serial communication between Python and the Arduino GIGA to display CSV values on-screen.</p>

  <div class="mb-3">
    <a href="arduino_codes/MVP codes/LVGLDemo_copy_20250416132112_copy_202504171_copy_20250417170104.ino" class="btn btn-primary" target="_blank">ğŸ”— View Arduino Code</a>
    <a href="arduino_codes/MVP codes/python_glucose_send_to_arduino_apr16.py" class="btn btn-secondary" target="_blank">ğŸ Python (Apr 16 Integration)</a>
    <a href="arduino_codes/MVP codes/send_csv_value.py" class="btn btn-secondary" target="_blank">ğŸ Python (First CSV Test)</a>
  </div>

  <h4>âœ… 1. Prepare Arduino</h4>
  <ul>
    <li>Select your GIGAâ€™s port (e.g. <code>/dev/tty.usbmodem1101</code> on Paulinaâ€™s Mac).</li>
    <li>Click <strong>Upload</strong>.</li>
    <li><strong>âš ï¸ Do NOT open Serial Monitor after uploading.</strong></li>
  </ul>

  <h4>âœ… 2. In Terminal (Apr 16 Integration)</h4>
  <ul>
    <li>Open terminal</li>
    <li><code>cd ~/Documents</code></li>
    <li><code>python python_glucose_send_to_arduino_apr16.py</code></li>
  </ul>
  <p><strong>Ensure:</strong></p>
  <ul>
    <li>Correct potentiostat port: <code>dev = Potentiostat('/dev/tty.usbmodem101')</code></li>
    <li>Correct Arduino port: <code>send_to_arduino(value, port="/dev/tty.usbmodem1101")</code></li>
  </ul>

  <p><strong>âœ… Success looks like:</strong></p>
  <pre><code>ğŸ“„ CSV value: 42.7
âœ”ï¸ Sent to Arduino: 42.7</code></pre>
  <p>The display will now show the concentration.</p>
  <p><strong>Next Steps:</strong> Make it update every <code>x</code> amount of time to allow several readings.</p>

  <hr>
  <h4>ğŸ”¬ First Test Instructions</h4>

  <h5>âœ… 1. Prepare Arduino</h5>
  <ul>
    <li>Select your GIGAâ€™s port (e.g. <code>/dev/tty.usbmodem1101</code>).</li>
    <li>Click <strong>Upload</strong>.</li>
    <li><strong>âš ï¸ Do NOT open Serial Monitor after uploading.</strong></li>
  </ul>

  <h5>âœ… 2. Create CSV File</h5>
  <ul>
    <li>Name it: <code>Reading_to_GIGA.csv</code></li>
    <li>Add one number (e.g. <code>42.7</code>) and save it.</li>
    <li>Place it in a known folder (e.g. Desktop or Documents).</li>
  </ul>

  <h5>âœ… 3. Create Python Script</h5>
  <ol>
    <li>Open VS Code or TextEdit.</li>
    <li>Paste and save the following as <code>send_csv_value.py</code>:</li>
  </ol>

  <pre><code>import serial
import time

CSV_FILE = "Reading_to_GIGA.csv"
SERIAL_PORT = "/dev/tty.usbmodem1101"
BAUD_RATE = 115200

def read_first_value_from_csv():
    try:
        with open(CSV_FILE, 'r') as f:
            for line in f:
                line = line.strip()
                if line:
                    return line
    except FileNotFoundError:
        print(f"âŒ File not found: {CSV_FILE}")
    return None

def send_to_arduino(value):
    try:
        with serial.Serial(SERIAL_PORT, BAUD_RATE, timeout=2) as ser:
            time.sleep(2)
            ser.write((value + '\n').encode())
            print(f"âœ”ï¸ Sent to Arduino: {value}")
    except serial.SerialException as e:
        print(f"âš ï¸ Serial error: {e}")

def main():
    value = read_first_value_from_csv()
    if value:
        print(f"ğŸ“„ CSV value: {value}")
        send_to_arduino(value)
    else:
        print("âŒ No valid value found in CSV.")

if __name__ == "__main__":
    main()</code></pre>

  <h5>âœ… 4. Use Terminal</h5>
  <ul>
    <li><code>cd ~/Documents</code></li>
    <li>(Optional, for permissions): <code>sudo chmod a+rw /dev/tty.usbmodem1101</code></li>
    <li><code>python send_csv_value.py</code></li>
  </ul>

  <div class="alert alert-success" role="alert">
  ğŸ“„ CSV value: 42.7<br>
  âœ”ï¸ Sent to Arduino: 42.7
</div>

  <p><strong>ğŸ” To Repeat:</strong></p>
  <ol>
    <li>Edit <code>Reading_to_GIGA.csv</code> with a new number</li>
    <li>Save the file</li>
    <li>Run <code>python send_csv_value.py</code></li>
  </ol>

  <p>ğŸ‰ You're all set!</p>
</div>
